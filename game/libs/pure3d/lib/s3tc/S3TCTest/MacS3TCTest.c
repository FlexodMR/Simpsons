// S3TCTest.c// Example Mac SIOW app to compress a 24bit RGB DDS texture to a DXT1 DDS texture//// Part of S3TCTest, example application using S3TCLib.// Developed for S3 by Seth Sowerby, Volume 11 Software#include <Types.h>#include <ctype.h>#include <fcntl.h>#include <memory.h>#include <string.h>#include <stdio.h>#include <stdlib.h>#include "Compress.h"enum{	kInputSize =	(1024*8),	kLimitFileNames = 1000};/* Variables local to this file */	static void S3TCTest(char* pszFilename){	Compress(pszFilename, "Out.dds");}int main ( int argc, char* argv[] ){	char					request[2048]; /* maximum line length that could be expected from gets() */	long					lcount = 0;	long					files = argc - 1;	char*					fileNames[kLimitFileNames];	long					done;	Boolean				validRequest = false;	char*					getsval;	if ( argc <= 1 )	{		printf("Note: You can drag 24bit RGB DDS files onto this application's icon in the Finder\n");		printf("to compress them to Out.DDS.\n");		printf("Make sure S3TCTest is not already running when you drag those icons!\n\n");		printf("Enter filenames, one per line, end with a blank line\n");			files = 0;		do	{			getsval = gets( request );			if ( request[0] == '\0' || getsval == NULL ) /* empty string or EOF */			{				break;			}			else			{				fileNames[files] = malloc( strlen(request) + 1 );				if ( fileNames[files] == NULL )				{					break;				}				else				{					strcpy( fileNames[files], request );					files++;				}			}		} while ( files < kLimitFileNames );		if ( files == 0 )		{			printf("\ndone\n");			return -1;		}	}	else	{		int i;		printf("%s\n", argv[0] );		for ( i = 1; i < argc; i++ )		{			fileNames[i-1] = argv[i];			printf( "    '%s'\n", argv[i] );		}	}	printf("\n");		for ( lcount = 0; lcount < files; lcount++ )	{		S3TCTest(fileNames[lcount]);		done++;	}	if ( argc <= 1 ) /* we used malloc in this case */	{		int 	i;		for ( i = 0; i < files; i++ )		{			free( fileNames[i] ); /* be nice, clean up heap */		}	}	printf( "\ndone\n" );	return 0;}